<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åˆ˜æ™“æ˜æ—¶ä»£å®¶åº­å†³æ‹©</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            text-align: center;
            padding: 20px;
            margin: 0;
        }
        .container {
            max-width: 700px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }
        h1 {
            color: #4a5568;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        .intro {
            font-size: 1.2em;
            color: #666;
            margin-bottom: 30px;
        }
        .assets {
            background: #e8f4fd;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            font-size: 1.1em;
        }
        .question {
            font-size: 1.4em;
            color: #2d3748;
            margin: 20px 0;
            font-weight: bold;
        }
        button {
            background: linear-gradient(45deg, #ff6b6b, #feca57);
            color: white;
            border: none;
            padding: 15px 30px;
            margin: 10px;
            cursor: pointer;
            font-size: 1.1em;
            border-radius: 50px;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }
        button.good {
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
        }
        button.bad {
            background: linear-gradient(45deg, #ff9ff3, #f368e0);
        }
        .dialogue {
            display: none;
            background: #fff3cd;
            border: 2px solid #ffeaa7;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            font-size: 1.2em;
            animation: fadeIn 0.5s;
        }
        .stage {
            display: none;
        }
        .intro-stage { display: block; }
        .ending {
            display: none;
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
        }
        .good-ending {
            background: linear-gradient(45deg, #a8e6cf, #88d8a3);
            color: #006400;
        }
        .bad-ending {
            background: linear-gradient(45deg, #ffafbd, #ffc3a0);
            color: #8b0000;
        }
        .restart {
            background: linear-gradient(45deg, #a55eea, #5f27cd);
            font-size: 1em;
            padding: 10px 20px;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>åˆ˜æ™“æ˜æ—¶ä»£å®¶åº­å†³æ‹©</h1>
        <div class="intro-stage stage">
            <p class="intro">çˆ·çˆ·ä¸ä¸–é•¿è¾ï¼Œç•™ä¸‹äº†åŠ å·¥å‚ã€å¤§æ¥¼ã€çº¸ç®±å‚ã€æˆ¿äº§ã€‚ä½ ä½œä¸ºé•¿å…„åˆ˜æ™“æ˜ï¼Œéœ€è¦ä¸å¦¹å¦¹åˆ†é…å®¶äº§ã€‚å®¶äººçš„æœŸå¾…ï¼Œæ˜¯å¦æ¸…é†’çš„å¤´è„‘ï¼Œä¸€åˆ‡éƒ½åœ¨ä¸€å¿µä¹‹é—´<br>ç›®æ ‡ï¼šå°½å¯èƒ½è®©è‡ªå·±å®¶å¾—åˆ°æ›´å¤š</p >
            <button onclick="startGame()">å¼€å§‹å†³æ‹©</button>
        </div>

        <div id="assets" class="assets" style="display:none;">
            <strong>å¦¹å¦¹å·²åˆ†åˆ°ï¼š</strong> <span id="sister-list">æ— </span> (<span id="count">0</span>/4)
        </div>

        <div id="stage1" class="stage">
            <p class="question">ç¬¬ä¸€ä¸ªæŠ‰æ‹©ï¼šåŠ å·¥å‚è¯¥å¦‚ä½•åˆ†é…ï¼Ÿ</p >
            <button class="bad" onclick="choose(0, 0)">è‡ªå·±å…¨æ‹¿ï¼ˆä¸ç»™å¦¹å¦¹ï¼‰</button>
            <button class="good" onclick="choose(1, 0)">å…¨ç»™å¦¹å¦¹</button>
            <button onclick="choose(2, 0)">ä¸€äººä¸€åŠï¼ˆåˆ†äº«ï¼‰</button>
        </div>

        <div id="stage2" class="stage" style="display:none;">
            <p class="question">ç¬¬äºŒä¸ªæŠ‰æ‹©ï¼šå¤§æ¥¼è¯¥å¦‚ä½•åˆ†é…ï¼Ÿ</p >
            <button class="bad" onclick="choose(0, 1)">è‡ªå·±å…¨æ‹¿ï¼ˆä¸ç»™å¦¹å¦¹ï¼‰</button>
            <button class="good" onclick="choose(1, 1)">å…¨ç»™å¦¹å¦¹</button>
            <button onclick="choose(2, 1)">ä¸€äººä¸€åŠï¼ˆåˆ†äº«ï¼‰</button>
        </div>

        <div id="stage3" class="stage" style="display:none;">
            <p class="question">ç¬¬ä¸‰ä¸ªæŠ‰æ‹©ï¼šçº¸ç®±å‚è¯¥å¦‚ä½•åˆ†é…ï¼Ÿ</p >
            <button class="bad" onclick="choose(0, 2)">è‡ªå·±å…¨æ‹¿ï¼ˆä¸ç»™å¦¹å¦¹ï¼‰</button>
            <button class="good" onclick="choose(1, 2)">å…¨ç»™å¦¹å¦¹</button>
            <button onclick="choose(2, 2)">ä¸€äººä¸€åŠï¼ˆåˆ†äº«ï¼‰</button>
        </div>

        <div id="stage4" class="stage" style="display:none;">
            <p class="question">æœ€åä¸€ä¸ªæŠ‰æ‹©ï¼šæˆ¿äº§è¯¥å¦‚ä½•åˆ†é…ï¼Ÿ</p >
            <button class="bad" onclick="choose(0, 3)">è‡ªå·±å…¨æ‹¿ï¼ˆä¸ç»™å¦¹å¦¹ï¼‰</button>
            <button class="good" onclick="choose(1, 3)">å…¨ç»™å¦¹å¦¹</button>
            <button onclick="choose(2, 3)">ä¸€äººä¸€åŠï¼ˆåˆ†äº«ï¼‰</button>
        </div>

        <div id="dialogue" class="dialogue"></div>

        <div id="ending" class="ending"></div>
    </div>

    <script>
        let step = 0;
        let sisterAssets = [];
        const assets = ['åŠ å·¥å‚', 'å¤§æ¥¼', 'çº¸ç®±å‚', 'æˆ¿äº§'];
        const dialogues = [
            // é˜¶æ®µ0: åŠ å·¥å‚
            ["å¦¹å¦¹ï¼šå“¥ï¼Œä½ å¤ªè‡ªç§äº†ï¼ä»¥ååˆ«å«æˆ‘å¦¹å¦¹ï¼", "å¦¹å¦¹ï¼šå“¥ï¼Œä½ çœŸå¥½ï¼åŠ å·¥å‚æˆ‘æ”¶ä¸‹äº†ï¼Œçˆ±ä½ ï¼", "å¦¹å¦¹ï¼šå“¥ï¼Œä¸€äººä¸€åŠï¼Ÿè¿™æ ·å·¥å‚å°±æ¯äº†ï¼Œæˆ‘ä»¬éƒ½æ²¡äº†â€¦â€¦"],
            // é˜¶æ®µ1: å¤§æ¥¼
            ["å¦¹å¦¹ï¼šå¤§æ¥¼ä½ å…¨è¦ï¼Ÿæˆ‘ä»¬å§å¦¹æƒ…åˆ†æ²¡äº†ï¼", "å¦¹å¦¹ï¼šè°¢è°¢å“¥ï¼å¤§æ¥¼å½’æˆ‘ï¼Œæˆ‘ä¼šå¥½å¥½ç®¡ç†çš„ï¼", "å¦¹å¦¹ï¼šä¸€åŠï¼Ÿå¤§æ¥¼è¿™æ ·åˆ†ï¼Œä¼šè´¬å€¼çš„â€¦â€¦"],
            // é˜¶æ®µ2: çº¸ç®±å‚
            ["å¦¹å¦¹ï¼šçº¸ç®±å‚ä¸ç»™æˆ‘ï¼Ÿä½ çœ¼é‡Œæ²¡æˆ‘ï¼", "å¦¹å¦¹ï¼šå“¥æœ€å¥½äº†ï¼çº¸ç®±å‚æˆ‘æ‹¿äº†ï¼", "å¦¹å¦¹ï¼šåˆ†äº«ï¼Ÿå‚å­ä¹±å¥—äº†ï¼Œå¤§å®¶éƒ½æ²¡åˆ©â€¦â€¦"],
            // é˜¶æ®µ3: æˆ¿äº§
            ["å¦¹å¦¹ï¼šæˆ¿äº§ä½ ç‹¬åï¼Ÿçˆ¸åœ¨å¤©ä¸Šä¸ä¼šåŒæ„ï¼", "å¦¹å¦¹ï¼šæˆ¿äº§ç»™æˆ‘ï¼Œå“¥ä½ æ˜¯æœ€æ£’çš„ä¸ˆå¤«ï¼", "å¦¹å¦¹ï¼šä¸€åŠæˆ¿äº§ï¼Ÿæ‰‹ç»­éº»çƒ¦ï¼Œä»·å€¼å…¨æ²¡äº†â€¦â€¦"]
        ];

        function startGame() {
            document.querySelector('.intro-stage').style.display = 'none';
            document.getElementById('assets').style.display = 'block';
            document.getElementById('stage1').style.display = 'block';
            updateAssets();
        }

        function choose(choice, currentStep) {
            // éšè—å½“å‰é˜¶æ®µ
            document.getElementById(`stage${currentStep + 1}`).style.display = 'none';
            // æ˜¾ç¤ºå¯¹è¯
            document.getElementById('dialogue').innerHTML = `<p>${dialogues[currentStep][choice]}</p >`;
            document.getElementById('dialogue').style.display = 'block';
            
            // å¦‚æœé€‰æ‹©å…¨ç»™å¦¹å¦¹ï¼Œæ·»åŠ èµ„äº§
            if (choice === 1) {
                sisterAssets.push(assets[currentStep]);
            }
            // choice 0æˆ–2ï¼šä¸åŠ ï¼ˆåæˆ–æ¯ï¼‰
            
            step++;
            updateAssets();
            
            setTimeout(() => {
                document.getElementById('dialogue').style.display = 'none';
                if (step < 4) {
                    document.getElementById(`stage${step + 1}`).style.display = 'block';
                } else {
                    showEnding();
                }
            }, 2000);
        }

        function updateAssets() {
            const list = sisterAssets.join('ã€') || 'æ— ';
            document.getElementById('sister-list').textContent = list;
            document.getElementById('count').textContent = sisterAssets.length;
        }

        function showEnding() {
            const count = sisterAssets.length;
            const ending = document.getElementById('ending');
            ending.style.display = 'block';
            
            let outcome, className;
            if (count >= 3) {
                outcome = `
                   <h2>ğŸ’” ç»“å±€ï¼šçœ‹ä¸æ¸…ç°çŠ¶ï¼Œå¤±è´¥ï¼Œå„¿å­å’Œå®¶äººéƒ½å¾ˆå¤±æœ›</h2>
                   <p>åªåˆ†åˆ° ${count}/4 å®¶äº§ï¼Œè¾œè´Ÿå®¶äººæœŸæœ›ã€‚</p >
                `;
                className = 'good-ending';
            } else {
                outcome = `
                    <h2>ğŸ‰ ç»“å±€ï¼šå¥½ä¸ˆå¤«ï¼</h2>
                    <p>å¦¹å¦¹åˆ†åˆ° ${count}/4 å®¶äº§ï¼ˆ${sisterAssets.join('ã€')}ï¼‰ï¼Œæˆä¸ºå°ä¸‘ï¼Œå®¶äººç§°ä½ æ˜¯å®Œç¾çš„å¥½ä¸ˆå¤«ï¼å®¶åº­å’Œç¦ï¼Œå¹¸ç¦ä¸€ç”Ÿã€‚</p >
                `;
                className = 'bad-ending';
            }
            ending.innerHTML = outcome;
            ending.className = `ending ${className}`;
            ending.innerHTML += '<br><button class="restart" onclick="restartGame()">é‡æ–°å†³æ‹©</button>';
        }

        function restartGame() {
            step = 0;
            sisterAssets = [];
            document.getElementById('assets').style.display = 'none';
            document.getElementById('ending').style.display = 'none';
            document.getElementById('dialogue').style.display = 'none';
            for (let i = 1; i <= 4; i++) {
                document.getElementById(`stage${i}`).style.display = 'none';
            }
            document.querySelector('.intro-stage').style.display = 'block';
        }
    </script>
</body>
</html>
